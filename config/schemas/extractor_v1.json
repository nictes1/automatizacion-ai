{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://pulpoai.com/schemas/extractor.v1.json",
  "title": "Extractor Output Schema v1",
  "description": "Schema para la salida del SLM Extractor (intent + NER)",
  "type": "object",
  "required": ["intent", "slots", "confidence"],
  "properties": {
    "intent": {
      "type": "string",
      "enum": [
        "greeting",
        "info_services",
        "info_prices",
        "info_hours",
        "book",
        "cancel",
        "reschedule",
        "chitchat",
        "other"
      ],
      "description": "Intención principal del usuario"
    },
    "slots": {
      "type": "object",
      "description": "Entidades extraídas del mensaje",
      "properties": {
        "service_type": {
          "type": ["string", "null"],
          "description": "Tipo de servicio mencionado (ej: Corte de Cabello, Coloración, Barba)"
        },
        "preferred_date": {
          "type": ["string", "null"],
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
          "description": "Fecha preferida en formato YYYY-MM-DD"
        },
        "preferred_time": {
          "type": ["string", "null"],
          "pattern": "^\\d{2}:\\d{2}$",
          "description": "Hora preferida en formato HH:MM (24h)"
        },
        "staff_name": {
          "type": ["string", "null"],
          "description": "Nombre del profesional preferido"
        },
        "client_name": {
          "type": ["string", "null"],
          "description": "Nombre del cliente"
        },
        "client_email": {
          "type": ["string", "null"],
          "format": "email",
          "description": "Email del cliente"
        },
        "client_phone": {
          "type": ["string", "null"],
          "description": "Teléfono del cliente"
        },
        "booking_id": {
          "type": ["string", "null"],
          "description": "ID de reserva existente (para cancelar/modificar)"
        }
      },
      "additionalProperties": false
    },
    "confidence": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "Confianza del modelo en la clasificación (0.0-1.0)"
    },
    "reasoning": {
      "type": "string",
      "maxLength": 200,
      "description": "Breve explicación del razonamiento (opcional, para debugging)"
    }
  },
  "additionalProperties": false
}





